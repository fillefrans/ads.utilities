<!doctype html>
<!-- Conditional comment for mobile ie7 blogs.msdn.com/b/iemobile/ -->
<!--[if IEMobile 7 ]>    <html class="no-js iem7" lang="en"> <![endif]-->
<!--[if (gt IEMobile 7)|!(IEMobile)]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

<head>
  <meta charset="utf-8">

  <title>Kroma demos</title>
  
  <!-- Metatags
  ================================================== -->
  <meta name="keywords" content="">
  <meta name="description" content="Mobile landingpage demos from Kroma">
  <meta name="author" content="Kroma AS">
  <meta name="web_author" content="Kroma AS">
  <meta name="copyright" content="Copyright 2012. All Rights Reserved.">
  
  <!-- Dublin Core Metadata -->
  <meta name="DC.title" content="Project Name">
  <meta name="DC.subject" content="What you're about.">
  <meta name="DC.creator" content="Kroma AS">

  <!-- Mobile viewport optimization h5bp.com/ad -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">

  <!-- Home screen icon  Mathias Bynens mathiasbynens.be/notes/touch-icons -->
  <!-- For iPhone 4 with high-resolution Retina display: -->
   <link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/h/apple-touch-icon.png">
  <!-- For first-generation iPad: -->
   <link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/m/apple-touch-icon.png">
  <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
   <link rel="apple-touch-icon-precomposed" href="img/l/apple-touch-icon-precomposed.png">
  <!-- For nokia devices: -->
   <link rel="shortcut icon" href="img/l/apple-touch-icon.png">

  <!-- iOS web app, delete if not needed. https://github.com/h5bp/mobile-boilerplate/issues/94 -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <!--<script>(function(){var a;if(navigator.platform==="iPad"){a=window.orientation!==90||window.orientation===-90?"img/startup-tablet-landscape.png":"img/startup-tablet-portrait.png"}else{a=window.devicePixelRatio===2?"img/startup-retina.png":"img/startup.png"}document.write('<link rel="apple-touch-startup-image" href="'+a+'"/>')})()</script>-->
  
  <!-- The script prevents links from opening in mobile safari. https://gist.github.com/1042026 -->
  <script>(function(a,b,c){if(c in b&&b[c]){var d,e=a.location,f=/^(a|html)$/i;a.addEventListener("click",function(a){d=a.target;while(!f.test(d.nodeName))d=d.parentNode;"href"in d&&(d.href.indexOf("http")||~d.href.indexOf(e.host))&&(a.preventDefault(),e.href=d.href)},!1)}})(document,window.navigator,"standalone")</script>
  
  <!-- Mobile IE allows us to activate ClearType technology for smoothing fonts for easy reading -->
  <meta http-equiv="cleartype" content="on">

  <!-- more tags for your 'head' to consider h5bp.com/d/head-Tips -->

  <!-- JavaScript -->

  <!-- Detect featured functions in browsers -->
  <script src="/assets/js/libs/modernizr-2.0.6.min.js"></script>

  <!-- jQuery mobile css, put first before jquery js files -->
  <link rel="stylesheet" href="/assets/css/jquery.mobile-1.1.0.css">
 
  <script src="/assets/js/libs/jquery-1.7.1.min.js"></script>

  <!-- jQuery mobile, put the css above the usual jquery file -->
  <script src="/assets/js/libs/jquery.mobile-1.1.0.min.js"></script>

  <!-- scripts concatenated and minified via ant build script-->
  <!-- <script src="js/helper.js"></script> -->

  <!-- jquery live tester for auto refresh of page when developing -->
  <!-- NOTE! REMOVE ON PRDUCTION -->
  <!-- <script src="js/live.js" type="text/javascript"></script>-->

  <!-- end scripts-->
  
  <!-- Stuff needed for the slider -->
  <!-- Modernizr -->

  <script src="modules/slider/modernizr.js"></script>

  <!-- Main Stylesheet -->
  <link href='http://fonts.googleapis.com/css?family=Yellowtail' rel='stylesheet' type='text/css'>

</head>

<body class="loading">

<!--
==========================================================================
  MAIN PAGE
==========================================================================
-->
  <div id="mainpage" data-role="page">
  
  	<div class="header">
  		<div class="inner">
  			<header>

  			</header>
  		</div>
  	</div>

    <div class="maincontent">
      <div class="inner">

        <article data-role="content" class="content">
          <h1>Kroma Forms</h1>
      	  <p>This is a form with dynamic data</p>
      	  
      	  <section class="form">

           <form class="cmxform" id="kromaform" method="get" data-ajax="false" action="">


            <!--
            ###########################################
            HERE YOU MODIFY ALL DATA
            --> 

            <!--
            ###########################################
            1) Set kunde and produkt_navn
            --> 
            <input type="hidden" name="kunde" value="kroma">
            <input type="hidden" name="produkt_navn" value="testprodukt">

            <!-- Bruk "mailto" for å sende en kopi av innsendte data per e-post  -->
            <input type="hidden" name="mailto" value="jt@kroma.no,jt@enfield.no"> 
            
            <!-- Samme som i Flash-skjemaet  -->
            <input type="hidden" name="mail_tittel" value="Vælkømin tel gards"> 
            <input type="hidden" name="mail_link1" value="http://www.kroma.no"> 
            <input type="hidden" name="mail_avsender" value="no-reply@kroma.no"> 
            <input type="hidden" name="mail_template" value="kroma_test.html"> 
            

             <fieldset>
               <legend></legend>
                 
               <!--
                ###########################################
                2) Here goes all the form elements you want..
                  - class=required means it is required
                  -  class=email, is email type
                  - class=url, is url type
                --> 

                 <!--
                  OBS. Bruk ENTEN etternavnFornavn ("Telstad, Johan" / "Johan Telstad"), ELLER fornavn/etternavn hver for seg
                  -->

                 <label for="etternavnFornavn">Navn</label>
                 <input id="etternavnFornavn" name="etternavnFornavn" size="64" class="required" />

                 <label for="fornavn">Fornavn</label>
                 <input id="fornavn" name="fornavn" size="25" class="required" />
                 
                 <label for="etternavn">Etternavn</label>
                 <input id="etternavn" name="etternavn" size="25" class="required" />



                 <label for="gateadresse">Gateadresse</label>
                 <input id="gateadresse" name="gateadresse" size="25" class="required" />


                 <!--
                  OBS. Bruk ENTEN postadresse ("0000 oslo"), ELLER postnummer/poststed hver for seg
                  -->

                 <label for="postadresse">Postadresse</label>
                 <input id="postadresse" name="postadresse" size="25" class="required" />

                 <label for="postnummer">Postnummer</label>
                 <input id="postnr" name="postnr" size="6" class="required zipcode" />

                 <label for="poststed">Poststed</label>
                 <input id="poststed" name="poststed" size="25" class="required" />



                 <label for="telefon">Telefon</label>
                 <input id="telefon" name="telefon" size="10" class="phone" />

                 <label for="epost">E-post</label>
                 <input id="epost" name="epost" size="64"  class="required email" />
                 
                 
                 <label for="comment">Kommentar</label>
                 <textarea id="comment" name="comment" cols="22"  class="required"></textarea>
                 <input class="submit" type="submit" value="Send" data-inline="true"/>

<!--
HIDDEN
mailto
mail_tittel
mail_link1
mail_avsender
mail_template

VISIBLE
fornavn
etternavn
gateadresse
etternavnFornavn
postadresse
postnr
poststed
epost
telefon
KROMA_svar1
KROMA_svar2
KROMA_svar3
KROMA_svar4

-->


             </fieldset>
           </form>

      	  </section>
      	  
        </article>
      </div>
    </div>
    
    <footer class="links">

    </footer>
    
  </div>
<!-- end Main page -->


<!--
###########################################
HERE GOES THE INFORMATION POPUP OR PAGE,
YOU CAN USE WHAT EVER YOU WANT TO OPEN:
  - Dialog, page, etc..
-->
<div data-role="dialog" id="formpopup" data-theme="c">
    <div data-role="header" data-theme="b">
        <h1>
            Some title
        </h1>
    </div><!-- /header -->
    <div data-role="content">
        <p>
            Thank you for .....
        </p>

        <p>
            <a href="" data-rel="back" data-role="button" data-inline="true">Close</a>
        </p>
    </div><!-- /content -->
    <div data-role="footer" data-theme="b">
        <h4>
            <!-- Page Footer -->
        </h4>
    </div><!-- /footer -->
</div><!-- /page -->
<!--/Form popup-->


	<script src="js/main.js"></script>
	<!-- Checks if there are high resulution images available with the "@2x" Apple's selector -->
	<script src="js/retina.js"></script>
	

<!--
###########################################
THIS TWO INCLUDES ARE NEEDED FOR FORM VALIDATION AND OTHER FORM HANDLING
-->
  <script type="text/javascript" src="/assets/js/jquery.validate.js"></script>
  <script type="text/javascript" src="/assets/js/jquery.form.js"></script>



<!--
###########################################
MAGIC THAT MAKES IT HAPPEN
-->	
	<script type="text/javascript">
  
      $(document).ready(function(){

        //Initiate validation
        $("#kromaform").validate({
         submitHandler: function(form) {
          //On success send the data
          var formData = $('#kromaform').serialize();
          console.log('Sent data is: ' + formData);
          send_number(formData);
         }
        });
      

      });

    function send_number(formData)
    {

      if(window.XMLHttpRequest)
      {
        xmlrequest=new XMLHttpRequest();
      }else
      {
        xmlrequest=new ActiveXObject("Microsoft.XMLHTTP");
      }
      xmlrequest.onreadystatechange=function()
      {
        if(xmlrequest.status==200 && xmlrequest.readyState==4)
        {
          var response=xmlrequest.responseText;
          var error_id=response.substr(response.indexOf("=")+1,1);
          var check_stored=response.indexOf("Skjemaet+er+sendt+inn");
          console.log("checked stored="+check_stored);


          //If it was sent and saved to db successful
          if(error_id==0 || check_stored > 0)
          {
            $("#kromaform").resetForm();
            $.mobile.changePage('#formpopup', 'pop', true, true);
          }
          //Else show the error
          else {
            alert("ERROR: "+response);
          }



        }
      }
      //xmlrequest.open("GET","do.php",true);
      xmlrequest.open("GET","serverscripts/do.php?"+formData,true);
      xmlrequest.send();
    } 

	</script>

  <!-- Debugger - remove for production -->
  <!-- <script src="https://getfirebug.com/firebug-lite.js"></script> -->

  <!-- Asynchronous Google Analytics snippet. Change UA-XXXXX-X to be your site's ID.
       mathiasbynens.be/notes/async-analytics-snippet -->
  <!--<script>
    var _gaq=[["_setAccount","UA-XXXXX-X"],["_trackPageview"]];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
    g.src=("https:"==location.protocol?"//ssl":"//www")+".google-analytics.com/ga.js";
    s.parentNode.insertBefore(g,s)}(document,"script"));
  </script>-->

</body>
</html>